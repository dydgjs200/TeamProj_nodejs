<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            height: fit-content;
            text-align: center;
        }
        /* 모니터 화면 */
        #moniter {
            /* max-width: 600px; */
            margin-top: 30px;
            margin-left: auto;
            margin-right: auto;
            /* border: 1px solid black; */
            width: 800px;
            height: 300px;
            box-shadow: 2px 2px 2px 2px grey;
        }

        #text-to-type {
            position: relative;
            font-size: 1.5em;
            padding-top: 20px;
            margin-bottom: 20px;
        }

        #user-input {
            font-size: 1em;
            padding: 5px;
            width: 300px;
        }

        #user-input.error {
            color: red;
        }

        #result {
            margin-top: 100px;
            font-weight: bold;
            /* position: fixed; */
            /* border: 1px solid black; */
        }

        /* 키보드 전체  */
        .big_C {
            /* border: 1px solid black; */
            flex-wrap: wrap;
            max-width: fit-content;
            text-align: center;
            margin: 0 auto;
        }
        /* 한줄 마다 */
        .sml_C {
            /* border: 1px solid black; */
            display: flex;
        }
        .key {
            width: 50px;
            height: 50px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            margin: 2px;
            box-shadow: 2px 2px 2px 1px grey;
        }
        .tab-key {
            width: 74px; /* Tab 키의 가로 길이 조절 */
        }
        .caps-lock-key {
            width: 90px; /* Caps Lock 키의 가로 길이 조절 */
        }
        .delete-key {
            width: 74px;
        }
        .enter-key {
            width: 90px;
        }
        .shift-key {
            width: 118px;
        }
        .space-key {
            width: 370px;
        }
        .ctrl-key {
            width: 70px;
        }

        .changed {
            background-color: rgb(255, 73, 73);
        }
        
        
    </style>
</head>
<body>
    <!-- 화면 출력 -->
    <div id="moniter">
        <div id="text-to-type">한글 타자 검정을 시작합니다. 아무내용이나 써보세요</div>
        <input type="text" id="user-input" placeholder="여기에 입력하세요" oninput="checkTyping()">
        <div id="result"></div>
            <!-- "영문자" 버튼 -->
        <button id="toggleKeyboard" onclick="toggleKeyboard()">영문자</button>
    </div>
    
    <!-- 키보드 -->
    <!-- 한글 자판 -->
    <div class="big_C" id="hgkeyboard">
        <div class="sml_C" id="hg_1">
            <div class="key" id="`">`</div>
            <div class="key" id="1">1</div>
            <div class="key" id="2">2</div>
            <div class="key" id="3">3</div>
            <div class="key" id="4">4</div>
            <div class="key" id="5">5</div>
            <div class="key" id="6">6</div>
            <div class="key" id="7">7</div>
            <div class="key" id="8">8</div>
            <div class="key" id="9">9</div>
            <div class="key" id="0">0</div>
            <div class="key" id="-">-</div>
            <div class="key" id="=">=</div>
            <div class="key delete-key" id="Backspace">Delete</div>
        </div>
        <!-- 2번 째 줄 -->
        <div class="sml_C" id="hg_2">
            <div class="key tab-key" id="Tab">Tab</div>
            <div class="key" id="q">ㅂ</div>
            <div class="key" id="w">ㅈ</div>
            <div class="key" id="e">ㄷ</div>
            <div class="key" id="r">ㄱ</div>
            <div class="key" id="t">ㅅ</div>
            <div class="key" id="y">ㅛ</div>
            <div class="key" id="u">ㅕ</div>
            <div class="key" id="i">ㅑ</div>
            <div class="key" id="o">ㅐ</div>
            <div class="key" id="p">ㅔ</div>
            <div class="key" id="[">[</div>
            <div class="key" id="]">]</div>
            <div class="key" id="\">\</div>
        </div>
        <!-- 3번째 줄 -->
        <div class="sml_C" id="hg_3">
            <div class="key caps-lock-key" id="CapsLock">Caps Lock</div>
            <div class="key" id="a">ㅁ</div>
            <div class="key" id="s">ㄴ</div>
            <div class="key" id="d">ㅇ</div>
            <div class="key" id="f">ㄹ</div>
            <div class="key" id="g">ㅎ</div>
            <div class="key" id="h">ㅗ</div>
            <div class="key" id="j">ㅓ</div>
            <div class="key" id="k">ㅏ</div>
            <div class="key" id="l">ㅣ</div>
            <div class="key" id=";">;</div>
            <div class="key" id="'">'</div>
            <div class="key enter-key" id="Enter">Enter</div>
        </div>
        <!-- 4번째 줄 -->
        <div class="sml_C" id="hg_4">
            <div class="key shift-key" id="ShiftLeft">Shift</div>
            <div class="key" id="z">ㅋ</div>
            <div class="key" id="x">ㅌ</div>
            <div class="key" id="c">ㅊ</div>
            <div class="key" id="v">ㅍ</div>
            <div class="key" id="b">ㅠ</div>
            <div class="key" id="n">ㅜ</div>
            <div class="key" id="m">ㅡ</div>
            <div class="key" id=",">,</div>
            <div class="key" id=".">.</div>
            <div class="key" id="/">/</div>
            <div class="key shift-key" id="ShiftRight">Shift</div>
        </div>        
        <!-- 5번째 줄 -->
        <div class="sml_C" id="hg_5">
            <div class="key ctrl-key" id="ControlLeft">Ctrl</div>
            <div class="key"> </div>
            <div class="key" id="AltLeft">Alt</div>
            <div class="key space-key" id="Space">Space</div>
            <div class="key" id="HangulMode">한/영</div>
            <div class="key" id="HanjaMode">한자</div>
            <div class="key"> </div>
            <div class="key ctrl-key" id="ControlRight">Ctrl</div>
        </div>
    </div>
    <!-- 영어 자판 -->
    <div class="big_C" id="egkeyboard" style="display: none;">
        <div class="sml_C" id="eg_1">
            <div class="key" id="`">`</div>
            <div class="key" id="1">1</div>
            <div class="key" id="2">2</div>
            <div class="key" id="3">3</div>
            <div class="key" id="4">4</div>
            <div class="key" id="5">5</div>
            <div class="key" id="6">6</div>
            <div class="key" id="7">7</div>
            <div class="key" id="8">8</div>
            <div class="key" id="9">9</div>
            <div class="key" id="0">0</div>
            <div class="key" id="-">-</div>
            <div class="key" id="=">=</div>
            <div class="key delete-key" id="Backspace">Delete</div>
        </div>
        <!-- 2번 째 줄 -->
        <div class="sml_C" id="eg_2">
            <div class="key tab-key" id="Tab">Tab</div>
            <div class="key" id="q">q</div>
            <div class="key" id="w">w</div>
            <div class="key" id="e">e</div>
            <div class="key" id="r">r</div>
            <div class="key" id="t">t</div>
            <div class="key" id="y">y</div>
            <div class="key" id="u">u</div>
            <div class="key" id="i">i</div>
            <div class="key" id="o">o</div>
            <div class="key" id="p">p</div>
            <div class="key" id="[">[</div>
            <div class="key" id="]">]</div>
            <div class="key" id="\">\</div>
        </div>
        <!-- 3번째 줄 -->
        <div class="sml_C" id="eg_3">
            <div class="key caps-lock-key" id="CapsLock">Caps Lock</div>
            <div class="key" id="a">a</div>
            <div class="key" id="s">s</div>
            <div class="key" id="d">d</div>
            <div class="key" id="f">f</div>
            <div class="key" id="g">g</div>
            <div class="key" id="h">h</div>
            <div class="key" id="j">j</div>
            <div class="key" id="k">k</div>
            <div class="key" id="l">l</div>
            <div class="key" id=";">;</div>
            <div class="key" id="'">'</div>
            <div class="key enter-key" id="Enter">Enter</div>
        </div>
        <!-- 4번째 줄 -->
        <div class="sml_C" id="eg_4">
            <div class="key shift-key" id="ShiftLeft">Shift</div>
            <div class="key" id="z">z</div>
            <div class="key" id="x">x</div>
            <div class="key" id="c">c</div>
            <div class="key" id="v">v</div>
            <div class="key" id="b">b</div>
            <div class="key" id="n">n</div>
            <div class="key" id="m">m</div>
            <div class="key" id=",">,</div>
            <div class="key" id=".">.</div>
            <div class="key" id="/">/</div>
            <div class="key shift-key" id="ShiftRight">Shift</div>
        </div>
        
        <!-- 5번째 줄 -->
        <div class="sml_C" id="eg_5">
            <div class="key ctrl-key" id="ControlLeft">Ctrl</div>
            <div class="key"> </div>
            <div class="key" id="AltLeft">Alt</div>
            <div class="key space-key" id="Space">Space</div>
            <div class="key" id="HangulMode">한/영</div>
            <div class="key" id="HanjaMode">한자</div>
            <div class="key"> </div>
            <div class="key ctrl-key" id="ControlRight">Ctrl</div>
        </div>
    </div>
    <!-- ----------------구분선--------------- -->
    <script>
        // 키보드 전환 함수
        function toggleKeyboard() {
            const hgKeyboard = document.getElementById('hgkeyboard');
            const egKeyboard = document.getElementById('egkeyboard');
            const toggleButton = document.getElementById('toggleKeyboard');

            // "한글 자판"이 보이면 "영어 자판"으로, 그 반대도 마찬가지
            if (hgKeyboard.style.display !== 'none') {
                hgKeyboard.style.display = 'none';
                egKeyboard.style.display = 'block';
                toggleButton.innerText = '한글';
                applyStylesAndEvents('eg');
            } else {
                hgKeyboard.style.display = 'block';
                egKeyboard.style.display = 'none';
                toggleButton.innerText = '영문자';
                applyStylesAndEvents('hg');
            }
        }
        // ----------------------- 구 분 선 ----------------------- 
        // 키 눌렀을 때 이벤트
        window.addEventListener("keydown", (e) => {

        // 일반적인 키 => e.key 키 값으로 받기.
        const key = document.getElementById(e.key);
        if (key) key.classList.add("changed");

        // 특수 키 => e.code 코드 값으로 받기.
        const code = document.getElementById(e.code);
        if (code) code.classList.add("changed");
        });

        // 키 뗐을 때 이벤트
        window.addEventListener("keyup", (e) => {

        const key = document.getElementById(e.key);
        if (key) key.classList.remove("changed");

        const code = document.getElementById(e.code);
        if (code) code.classList.remove("changed");
        });
        // ----------------------- 구 분 선 -----------------------
        //  타자 검정
        const originalText = "한글 타자 검정을 시작합니다. 아무내용이나 써보세요";
        const textToType = document.getElementById('text-to-type');
        const userInput = document.getElementById('user-input');
        const result = document.getElementById('result');
    
        function checkTyping() {
          const userTypedText = userInput.value;
          const correctText = originalText.substring(0, userTypedText.length);
          const accurary = (correctText.length / originalText.length) * 100;
    
          if (userTypedText === originalText) {
            result.innerText = '정확도: 100%';
          } else if (userTypedText === correctText) {
            result.innerText = `정확도: ${accurary.toFixed(2)}%`;
            userInput.classList.remove('error');
          } else {
            result.innerText = `정확도: ${accurary.toFixed(2)}%`;
            userInput.classList.add('error');
          }
        }
      </script>
</body>
</html>
